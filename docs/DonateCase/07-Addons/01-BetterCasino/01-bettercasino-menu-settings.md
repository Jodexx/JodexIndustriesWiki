---
id: bettercasino-menu-settings
title: Налаштування GUI анімації
toc_min_heading_level: 2
toc_max_heading_level: 5
sidebar_custom_props:
  icon: FaCog
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

# Налаштування GUI анімації

Список усіх налаштувань GUI та дій анімації

## Меню

```yaml
menu:
  title: "TEXT" # Заголовок меню
  size: 27 # Розмір меню
```

## Шанси

Налаштування несправжніх шансів випадкових груп (лише для відображення)

```yaml
chances:
  Vip: 5
  VipPlus: 10
  Premium: 15
  Deluxe: 20
  Legend: 25
  Ultra: 30
```

## Призи

Налаштування призів, які будуть використовуватись в анімації.

- `win` - приз, який гравець отримає в якості виграшного
- `random` - випадковий приз, виключно для відображення

Насправді це просто створення [заповнювачів](#призи-1) для відображення.

```yaml
prizes:
  win: win
  random1: random
  random2: random
  random3: random
  random4: random
  random5: random
  random6: random
  random7: random
  random8: random
```

## Групи дій

Групи дій потрібні, щоб не повторюватися при написанні важких сценаріїв анімації, які потребують циклічності.

```yaml
groups:
  setup: # назва групи
    actions: # дії цієї групи
      - type: replace_item
        slot: 26
        material: RED_STAINED_GLASS_PANE
        display_name: "&7Skip the animation"
  second_group: # інша група
    # actions:
    #   - type: replace_item
    #     slots: 0-8
    #     material: BARRIER
    #     display_name: "&cSTOP"
```

:::info
Використання груп відбувається за допомогою дії [`execute_group`](#execute_group)
:::

## Заповнювачі

### Звичайні

- `%case_type%` - Тип кейсу
- `%case_display_name` - Відображувана назва кейсу
- `%case_title%` - Заголовок кейсу
- `%player%` - Ім'я гравця, який відкриває кейс
- `%current_tick%` - Поточний тік

### Призи

`<name>` - ім'я приза із секції [prizes](#призи)

- `%prize_<name>_group%` - Назва групи приза
- `%prize_<name>_chance%` - Шанс групи приза
- `%prize_<name>_display_name%` - Відображувана назва приза
- `%prize_<name>_id%` - Айді матеріалу приза (STONE, BASE64, тощо)

## Налаштування тіків

### Один тік

```yaml
ticks:
  0: # дії будуть виконані лише на початку (на 0 тіку)
    actions:
      # певні дії
```

### Діапозон тіків

```yaml
ticks:
  0-20: # дії будуть повторюватись 20 тіків
    actions:
    # певні дії
```

Для діапазону доступні ще 2 налаштування, такі як `interval` (інтервал) та `gradual_slowdown` (поступове сповільнення)

#### Інтервал

Інтервал між тіками означає, скільки тіків буде пропускатись після кожного виконання

```yaml
ticks:
  0-20: # дії будуть повторюватись 10 тіків
    interval: 2 # інтервал між тіками
    actions:
    # певні дії
```

#### Поступове сповільнення

Поступове сповільнення працює на основі інтервалу, який з кожним виконанням тіку збільшується.
Ця функція працює за формулою: `інтервал = scale_factor * крок^2` де крок, це номер тіку у цьому діапазоні

```yaml
ticks:
  0-20:
    gradual_slowdown:
      enabled: true
      scale_factor: 1.0
    actions:
    # певні дії
```

:::tip
Для зручності в обчисленнях потрібних значень, можна використати [команди](#команди-для-обчислення-поступового-сповільнення)
:::

## Налаштування дій

:::tip
Майже усі дії мають свої певні поля налаштувань, важливо дотримуватись назв та синтаксису
:::

### `end`

Дія, яка завершує анімацію та видає приз гравцю

### `replace_item`

Дія, яка заміняє предмет у слоті

<Tabs>
<TabItem value="description" label="Опис" default>

| Поле           | Опис                                                                   | Синоніми                               | Обов'язковий                   |
|----------------|------------------------------------------------------------------------|----------------------------------------|--------------------------------|
| `slot`         | Слот, або діапазон слотів                                              | немає                                  | Так, якщо `slots` не зазначено |
| `slots`        | Список слотів, або діапазонів                                          | немає                                  | Так, якщо `slot` не зазначено  |
| `material`     | Матеріал предмету для заміни. Є підтримка усіх матеріалів з DonateCase | `id`                                   | Ні                             |
| `display_name` | Відображуване ім'я предмета                                            | `name`, `displayName`                  | Ні                             |
| `lore`         | Опис предмету                                                          | немає                                  | Ні                             |
| `enchanted`    | Визначає зачарованість предмету                                        | немає                                  | Ні                             |
| `model_data`   | Задає користувацьці данні моделі                                       | `custom_model_data`, `customModelData` | Ні                             |
| `rgb`          | Задає колір шкіряних предметів                                         | немає                                  | Ні                             |

</TabItem>

<TabItem value="example" label="Приклад">

```yaml
  - type: replace_item
    slot: 9
    material: "%prize_win_id%"
    display_name: "&b%prize_win_display_name%"
    lore:
      - "&6&lChance: &c&l%prize_win_chance%"
```

</TabItem>

</Tabs>

### `move_item`

Дія, яка переміщує предмет до іншого слоту
:::warning
При переміщенні у назначений слот, предмет, який там був, буде замінено та втрачено
:::

<Tabs>
<TabItem value="description" label="Опис" default>

| Поле           | Опис                                     | Синоніми  |  Обов'язковий |
|----------------|------------------------------------------|-----------|---------------|
| `from`         | Слот предмету, який потрібно перемістити | `first`   | Так           |
| `to`           | Слот, в який потрібно перемістити        | `second`  | Так           |

</TabItem>

<TabItem value="example" label="Приклад">

```yaml
  - type: move_item
    from: 0
    to: 1
```

</TabItem>

</Tabs>

### `switch_item`

Дія, яка міняє предмети місцями

<Tabs>
<TabItem value="description" label="Опис" default>

| Поле        | Опис                                     | Синоніми   | Обов'язковий  |
|-------------|------------------------------------------|------------|---------------|
| `base_slot` | Початковий слот, з якого почнеться зміна | немає      | Так, якщо `slots` не вказано           |
| `count`     | Кількість змін                           | немає      | Так, якщо `slots` не вказано           |
| `slots`     | Список слотів для зміни | ні | Так, якщо `base_slot` і `count` не вказані |

</TabItem>

<TabItem value="example" label="Приклад">

```yaml
  - type: switch_item
    base_slot: 9
    count: 9
```

Те ж саме, що й попереднє

```yaml
  - type: switch_item
    slots: [9-17]
```

Приклад просунутої зміни (колеса)

```yaml
  - type: switch_item
    slots: [10-16, 25, 34, 43, 42-37, 28, 19]
```

</TabItem>

</Tabs>

### `donate_case`

Дія, яка виконує дію з DonateCase

<Tabs>
<TabItem value="description" label="Опис" default>

| Поле      | Опис                     | Синоніми | Обов'язковий |
|-----------|--------------------------|----------|--------------|
| `actions` | Список дій для виконання | немає    | Так          |

</TabItem>

<TabItem value="example" label="Приклад">

```yaml
  - type: donate_case
    actions:
      - "[sound] UI_BUTTON_CLICK 1 1"
```

</TabItem>

</Tabs>

### `set_title`

Дія, яка змінює заголовок меню для всіх глядачів

:::warning
Дія працює лише на версії сервера 1.20+
:::

<Tabs>
<TabItem value="description" label="Опис" default>

| Поле    | Опис                 | Синоніми | Обов'язковий |
|---------|----------------------|----------|--------------|
| `title` | Новий заголовок меню | немає    | Так          |

</TabItem>

<TabItem value="example" label="Приклад">

```yaml
  - type: set_title
    title: "New title"
```

</TabItem>

</Tabs>

### `set_click`

Дія, яка призначає дії після натискання на слот

<Tabs>
<TabItem value="description" label="Опис" default>

| Поле           | Опис                                                                 | Синоніми | Обов'язковий                                     |
|-----------------|----------------------------------------------------------------------|----------|-------------------------------------------------|
| `slot`         | Слот, або діапазон слотів                                            | немає    | Так, якщо `slots` не зазначено                 |
| `slots`        | Список слотів, або діапазонів                                        | немає    | Так, якщо `slot` не зазначено                  |
| `click_types`  | Список типів кліків, на які буде відкликатись слот. Якщо не назначено, то відкликатиметься на всі | немає    | Ні                                              |
| `actions`      | Список дій, які виконуватимуться після кліку                         | немає    | Ні                                              |

</TabItem>

<TabItem value="example" label="Приклад">

```yaml
  - type: set_click
    slot: 0
    slots: [1, 2]
    click_types:
      - LEFT
      - RIGHT
    actions:
      - type: end
```

</TabItem>

</Tabs>

### `execute_group`

Дія, яка виконує групу назначених дій.
Детальніше - [Групи дій](#групи-дій)

<Tabs>
<TabItem value="description" label="Опис" default>

| Поле    | Опис                 | Синоніми | Обов'язково |
|---------|----------------------|----------|--------------|
| `group` | Назва групи | ні    | Так         |

</TabItem>

<TabItem value="example" label="Приклад">

```yaml
  - type: execute_group
    group: setup
```

</TabItem>

</Tabs>

## Додаткові функції

### Поширений перегляд

Функція поширеного перегляду дозволяє гравцям-глядачам дивитись на активну анімацію за допомогою натисненням ПКМ по активному блоку кейсу. Для цього в налаштуваннях анімації потрібно додати строку `Locked: true`

```yaml
animation-settings:
    Menu: csgo # назва конфігурації меню
    Locked: true
```

Функція `Locked` означає, що кейс заблоковано для одночасного відкриття багатьох анімацій з одного блоку, тобто, якщо функцію вимкнено (`false`), то кейс буде доступим для одночасного відкриття.

### Відкриття за допомогою команди

BetterCasino дозволяє відкриття кейсу з реальним відображенням анімації за допомогою стандартної команди `/dc opencase`, це означає, що гравці можуть відкривати кейси незалежно від блоку кейса.

### Команди для обчислення поступового сповільнення

- `/dc bettercasino steps (початок) (кінець) (scale factor)` - Обчислити кількість кроків (виконуваних тіків)
- `/dc bettercasino scalefactor (початок) (кінець) (кроки)` - Обчислити scale factor
- `/dc bettercasino end (початок) (кроки) (scale factor)` - Обчислити кінцевий тік

### JSON Schema

JSON Schema додає підказку для редагування яких-небудь конфігурацій YAML. Наприклад, завантаживши плагін `YAML` для VSCode, будуть відображатись допоміжні підказки. DCBetterCasino має свою особисту схему для редагування меню, але для того, щоб VSCode розрізняв, що це конфігурація саме для меню, достатньо просто в кінці файлу додавати строку `_dcbc`, наприклад: `csgo_dcbc.yml`

![alt text](../../../assets/jsonschema.png)
