---
id: registry
title: –†–µ–≥—ñ—Å—Ç—Ä
sidebar_custom_props:
  icon: FaList
---

# üìã –†–µ–≥—ñ—Å—Ç—Ä

–£ JGuiWrapper —ñ—Å–Ω—É—î —Ä–µ–≥—ñ—Å—Ç—Ä –¥–ª—è –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ –ø—Ä–µ–¥–º–µ—Ç—ñ–≤ —Ç–∞ —ó—Ö –ª–æ–∞–¥–µ—Ä—ñ–≤ –¥–∞–Ω–∏—Ö. –í—ñ–Ω —Å–ª—É–≥—É—î –¥–ª—è —É–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É —Å–∏—Å—Ç–µ–º–∞—Ö –≥—Ä–∞—Ñ—ñ—á–Ω–∏—Ö —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤.

:::note
–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ–≥—ñ—Å—Ç—Ä—É —î –¥–æ—Ä–µ—á–Ω–∏–º –≤–∏–∫–ª—é—á–Ω–æ –¥–ª—è `AdvancedGui`
:::

---

## üîë –ù–∞–≤—ñ—â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω —Ä–µ—î—Å—Ç—Ä?

- ‚úÖ –î–æ–∑–≤–æ–ª—è—î **–∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ —Ç–∏–ø–∏ –ø—Ä–µ–¥–º–µ—Ç—ñ–≤**.  
- ‚úÖ –î–∞—î –∑–º–æ–≥—É **–¥–æ–¥–∞–≤–∞—Ç–∏ –∫–∞—Å—Ç–æ–º–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –∫–ª—ñ–∫—ñ–≤** —Ç–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∏.  
- ‚úÖ –ó–∞–±–µ–∑–ø–µ—á—É—î **–∑—Ä—É—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö** –¥–ª—è GUI-–µ–ª–µ–º–µ–Ω—Ç—ñ–≤.  
- ‚úÖ –°–ø—Ä–∏—è—î **—Ä–æ–∑—à–∏—Ä—é–≤–∞–Ω–æ—Å—Ç—ñ** ‚Äî —ñ–Ω—à—ñ –ø–ª–∞–≥—ñ–Ω–∏ —á–∏ –º–æ–¥—É–ª—ñ –º–æ–∂—É—Ç—å –ø—ñ–¥–∫–ª—é—á–∞—Ç–∏ —Å–≤–æ—ó –µ–ª–µ–º–µ–Ω—Ç–∏.  

---

## üß© –ü—Ä–∏–∫–ª–∞–¥ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó

–°–ø–æ—á–∞—Ç–∫—É –æ—Ç—Ä–∏–º–∞—î–º–æ –≥–æ–ª–æ–≤–Ω–∏–π —Ä–µ–≥—ñ—Å—Ç—Ä

```java
GlobalRegistry registry = GuiApi.get().getRegistry();
```

–î–ª—è —Ç–æ–≥–æ, —â–æ–± –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ —è–∫–∏–π—Å—å –∑ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (–ª–æ–∞–¥–µ—Ä —á–∏ –æ–±—Ä–æ–±–Ω–∏–∫), —Å–ø–æ—á–∞—Ç–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ–π–Ω–∏–π –∫–ª—é—á (–±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î [Adventure Key](https://jd.advntr.dev/key/4.14.0/net/kyori/adventure/key/package-summary.html))

```java
// jguiwrapper - namespace
// test - id
public static final Key TEST_LOADER_KEY = Key.key("jguiwrapper", "test"); // –ª–æ–∞–¥–µ—Ä
public static final Key TEST_HANDLER_KEY = Key.key("jguiwrapper", "test"); // –æ–±—Ä–æ–±–Ω–∏–∫
```

–°—Ç–≤–æ—Ä–∏–º–æ –Ω–µ–≤–µ–ª–∏–∫–∏–π –ª–æ–∞–¥–µ—Ä –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∫–ª—ñ–∫—ñ–≤ —Ç–∞ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ–≤ –º–µ–Ω—é

```java title="TestGuiLoader.java"
public class TestGuiLoader implements GuiDataLoader {

    private final PlaceholderEngine placeholderEngine = PlaceholderEngine.of();

    private int openCount;
    private int clickCount;

    public TestGuiLoader() {
        // —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∑–∞–ø–æ–≤–Ω—é–≤–∞—á—ñ–≤
        placeholderEngine.register("%open_count%", (player) -> String.valueOf(openCount));
        placeholderEngine.register("%click_count%", (player) -> {
            if (clickCount >= 100) return ">= 100";

            return String.valueOf(clickCount);
        });
    }

    @Override
    public void load(AdvancedGui gui, HumanEntity player) {
        openCount++;

        // –ø—Ä–∏—Å–≤–æ—î–Ω–Ω—è –∑–∞–ø–æ–≤–Ω—é–≤–∞—á—ñ–≤ –¥–ª—è —É—Å—ñ—Ö –ø—Ä–µ–¥–º–µ—Ç—ñ–≤
        for (GuiItemController controller : gui.getControllers()) {
            controller.updateItems(itemWrapper -> {
                if (itemWrapper.placeholderEngine() == null) {
                    itemWrapper.placeholderEngine(placeholderEngine);
                } else {
                    itemWrapper.placeholderEngine().addAll(placeholderEngine);
                }
            });
        }
    }

    public void click() {
        clickCount++;
    }

    public int getOpenCount() {
        return openCount;
    }
}
```

–ú–µ—Ç–æ–¥ `load` –≤–∏–∫–ª–∏–∫–∞—Ç–∏–º–µ—Ç—å—Å—è –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É, –∫–æ–ª–∏ –≤–∏–∑–≤–∞–Ω–æ –º–µ—Ç–æ–¥ [AdvancedGui#loadData](https://github.com/Jodexx/JGuiWrapper/tree/master/api/src/main/java/com/jodexindustries/jguiwrapper/gui/advanced/AdvancedGui.java#L85)

–ó–∞—Ä–µ—î—Å—Ç—Ä—É—î–º–æ –Ω–∞—à –ª–æ–∞–¥–µ—Ä –≤ —Ä–µ–≥—ñ—Å—Ç—Ä
```java
registry.registerLoader(TEST_LOADER_KEY, new TestGuiLoader());
```

–ü–µ—Ä–µ–π–¥–µ–º–æ –¥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±—Ä–æ–±–Ω–∏–∫–∞ –ø—Ä–µ–¥–º–µ—Ç—ñ–≤

```java title="TestItemHandler"
public class TestItemHandler implements ItemHandler<TestGuiLoader> {

    @Override
    public void load(@NotNull TestGuiLoader loader, @NotNull GuiItemController controller, @NotNull HandlerContext context) {
        // –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—è –æ–±—Ä–æ–±–Ω–∏–∫–∞ –∫–ª—ñ–∫—ñ–≤ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∞
        controller.defaultClickHandler((e, c) -> {
            e.setCancelled(true);

            loader.click(); // –∑–±—ñ–ª—å—à–µ–Ω–Ω—è –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–ª—ñ–∫—ñ–≤

            // –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö –ø—Ä–µ–¥–º–µ—Ç—ñ–≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
            c.updateItems(itemWrapper -> itemWrapper.update(e.getWhoClicked()));
        });

        // –∑–º—ñ–Ω–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∞
        controller.updateItems(wrapper -> wrapper.lore("&cPlayer: &6%player_name%", "&cOpen count: &6%open_count%", "&cClick count: &6%click_count%"),
                (OfflinePlayer) context.player());
    }
}
```

:::info
–ù–∞—à –æ–±—Ä–æ–±–Ω–∏–∫ —ñ–º–ø–ª–µ–º–µ–Ω—Ç—É—î —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å ItemHandler –∑ —Ç–∏–ø—ñ–∑–∞—Ü—ñ—î—é –Ω–∞—à–æ–≥–æ –ª–æ–∞–¥–µ—Ä–∞ `TestGuiLoader`, —â–æ–± –¥—ñ—Å—Ç–∞–≤–∞—Ç–∏ –∑ –Ω—å–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é
:::

–ú–µ—Ç–æ–¥ `load` –≤–∏–∫–ª–∏–∫–∞—Ç–∏–º–µ—Ç—å—Å—è –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É, –∫–æ–ª–∏ –≤–∏–∑–≤–∞–Ω–æ –º–µ—Ç–æ–¥ [GuiItemController#loadItemHandler](https://github.com/Jodexx/JGuiWrapper/tree/master/api/src/main/java/com/jodexindustries/jguiwrapper/gui/advanced/GuiItemController.java#L445)

–ó–∞—Ä–µ—î—Å—Ç—Ä—É—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –≤ —Ä–µ–≥—ñ—Å—Ç—Ä
```java
registry.registerHandler(TEST_HANDLER_KEY, new TestItemHandler());
```

–ü—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –º–∏ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞–ª–∏ –æ–±—Ä–æ–±–Ω–∏–∫ —Ç–∞ –ª–æ–∞–¥–µ—Ä, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î–º–æ —ó—Ö –Ω–∞ –ø—Ä–∞–∫—Ç–∏—Ü—ñ. –í—Å–µ—Ä–µ–¥–∏–Ω—ñ gui –∑–∞—Ä–µ—î—Å—Ç—Ä—É—î–º–æ –ª–æ–∞–¥–µ—Ä

```java title="TestAdvancedGui"
public TestAdvancedGui() {
    super("&cAdvanced gui");

    registerLoader(TEST_LOADER_KEY);

    // —ñ–Ω—à–∏–π –∫–æ–¥
}
```

–ù–∞–∑–Ω–∞—á–∏–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –ø—Ä–µ–¥–º–µ—Ç—É `handled`

```java title="TestAdvancedGui"
registerItem("handled", builder -> builder.slots(52)
        .defaultItem(ItemWrapper.builder(Material.DIAMOND_BLOCK).build())
        .itemHandler(TEST_HANDLER_KEY));
```

–ó–∞–≤–∞–Ω—Ç–∞–∂–∏–º–æ –¥–∞–Ω—ñ —Ç–∞ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ
```java
onOpen(event -> {
    HumanEntity player = event.getPlayer();

    // –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è TestGuiLoader
    loadData(player);

    // –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è TestItemHandler
    for (GuiItemController controller : getControllers()) {
        controller.loadItemHandler(LoadType.ON_OPEN, player);
    }
});
```